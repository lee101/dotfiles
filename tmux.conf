# tmux configuration

# Change prefix to Ctrl+a (easier to reach than Ctrl+b)
unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# Enable mouse support
set -g mouse on

# Vi mode for copy
setw -g mode-keys vi

# Faster key repetition
set -s escape-time 0

# More history
set -g history-limit 10000

# More intuitive split commands
bind | split-window -h
bind - split-window -v
unbind '"'
unbind %

# Additional split bindings
bind-key -n C-S-E split-window -h
bind-key -n C-S-O split-window -v

# Ctrl+Shift+A as secondary prefix for | and - splits
set-option -g prefix2 C-S-A
bind-key C-S-A send-prefix -2
bind-key | split-window -h
bind-key - split-window -v

# Easy pane resizing with repeatable keys
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Vim-style pane navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Quick window switching
bind -r C-h select-window -t :-
bind -r C-l select-window -t :+

# Synchronize panes toggle (useful for running same command in multiple panes)
bind y setw synchronize-panes

# Status bar customization
set -g status-bg black
set -g status-fg white
set -g status-left '#[fg=green]#S '
set -g status-right '#[fg=yellow]#(date +"%H:%M")'

# Active window highlighting
setw -g window-status-current-style bg=red,fg=white,bold

# Reload config
bind r source-file ~/.tmux.conf \; display-message "Config reloaded!"

# Enable 256 colors
set -g default-terminal "tmux-256color"

# Ensure tmux works under Ghostty and other modern terminals
set -sa terminal-overrides ",xterm-ghostty:Tc"
set -sa terminal-overrides ",xterm-ghostty:RGB"

# Don't rename windows automatically
set-option -g allow-rename off

# Allow palette update sequences to pass through (prevents OSC rgb strings showing up)
set -as terminal-features ',xterm*:setrgb'
set -as terminal-features ',xterm*:RGB'
set -g allow-passthrough on

# Visual notification of activity in other windows
setw -g monitor-activity on
set -g visual-activity on
